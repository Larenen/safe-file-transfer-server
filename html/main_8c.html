<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Safe File Transfer Server: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Safe File Transfer Server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &quot;cJSON.h&quot;</code><br />
<code>#include &quot;cJSON.c&quot;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_user_struct.html">UserStruct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struktura przechowująca dane zalogowanego użytkownika.  <a href="struct_user_struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlinked__list.html">linked_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struktura przechowująca dane użytkowników na liście.  <a href="structlinked__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_watek_arg.html">WatekArg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struktura przechowujaca argumenty wątku klienta.  <a href="struct_watek_arg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ace5c08f66edfc6ae44edaeef6b6101b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ace5c08f66edfc6ae44edaeef6b6101b6">MAXCLIENTS</a>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:ace5c08f66edfc6ae44edaeef6b6101b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maksymalna ilość osób na serwerze.  <a href="#ace5c08f66edfc6ae44edaeef6b6101b6">More...</a><br /></td></tr>
<tr class="separator:ace5c08f66edfc6ae44edaeef6b6101b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada52ed7417b61dbceb294f3a70b64a60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ada52ed7417b61dbceb294f3a70b64a60">BUFSENDFILESTRUCT</a>&#160;&#160;&#160;4096</td></tr>
<tr class="memdesc:ada52ed7417b61dbceb294f3a70b64a60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maksymalny rozmiar bufora dla struktur z informacja o pliku.  <a href="#ada52ed7417b61dbceb294f3a70b64a60">More...</a><br /></td></tr>
<tr class="separator:ada52ed7417b61dbceb294f3a70b64a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32152c6b9522da6329f282c4890fd342"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a32152c6b9522da6329f282c4890fd342">MAXBUFFOR</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a32152c6b9522da6329f282c4890fd342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maksymalny rozmiar bufora.  <a href="#a32152c6b9522da6329f282c4890fd342">More...</a><br /></td></tr>
<tr class="separator:a32152c6b9522da6329f282c4890fd342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab5930070ed4d6c00323d40cabc637d4b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlinked__list.html">linked_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a></td></tr>
<tr class="memdesc:ab5930070ed4d6c00323d40cabc637d4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias na strukture listy.  <a href="#ab5930070ed4d6c00323d40cabc637d4b">More...</a><br /></td></tr>
<tr class="separator:ab5930070ed4d6c00323d40cabc637d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af94b217b978a6a5fb67458c194f52a8a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af94b217b978a6a5fb67458c194f52a8a">CreateJSONUserList</a> (int returnCode, char *message)</td></tr>
<tr class="memdesc:af94b217b978a6a5fb67458c194f52a8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funkcja tworzy liste użytkowników w formacie JSON.  <a href="#af94b217b978a6a5fb67458c194f52a8a">More...</a><br /></td></tr>
<tr class="separator:af94b217b978a6a5fb67458c194f52a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6666d9c44e6471297d5f54c89ec434a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ab6666d9c44e6471297d5f54c89ec434a">SaveFile</a> (char *filename, char *content)</td></tr>
<tr class="memdesc:ab6666d9c44e6471297d5f54c89ec434a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funkcja do zapisu pliku na dysk serwera.  <a href="#ab6666d9c44e6471297d5f54c89ec434a">More...</a><br /></td></tr>
<tr class="separator:ab6666d9c44e6471297d5f54c89ec434a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b5900aafd0149777f24db43937c3465"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a9b5900aafd0149777f24db43937c3465">CreateJSONFileInfo</a> (int returnCode, char *encryptedName, char *encryptedKey, char *encryptedIV)</td></tr>
<tr class="memdesc:a9b5900aafd0149777f24db43937c3465"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funkcja tworzy informacje o pliku w formacie JSON.  <a href="#a9b5900aafd0149777f24db43937c3465">More...</a><br /></td></tr>
<tr class="separator:a9b5900aafd0149777f24db43937c3465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954f14c716b852a2cfe58997d8f50eee"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a954f14c716b852a2cfe58997d8f50eee">ClientThread</a> (void *watekArg)</td></tr>
<tr class="memdesc:a954f14c716b852a2cfe58997d8f50eee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funkcja która jest wywoływana w wątku dla każdego nowego klienta.  <a href="#a954f14c716b852a2cfe58997d8f50eee">More...</a><br /></td></tr>
<tr class="separator:a954f14c716b852a2cfe58997d8f50eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01c9e6eba7d0d22bca950b87215c950"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ac01c9e6eba7d0d22bca950b87215c950">LoadFile</a> (char *filename, char *outarry)</td></tr>
<tr class="memdesc:ac01c9e6eba7d0d22bca950b87215c950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wczytuje plik do pamięci serwera w postaci tablicy char. Słuzy do wczytywania kluczy AES oraz nazwy pliku zaszyfrowanych przy pomocy RSA.  <a href="#ac01c9e6eba7d0d22bca950b87215c950">More...</a><br /></td></tr>
<tr class="separator:ac01c9e6eba7d0d22bca950b87215c950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80edabe2bb587ae21cb56d0e9c865d14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a80edabe2bb587ae21cb56d0e9c865d14">SendRefreshUserList</a> ()</td></tr>
<tr class="memdesc:a80edabe2bb587ae21cb56d0e9c865d14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Służy do wysłania aktywnym klientom listy aktywnych użytkowników.  <a href="#a80edabe2bb587ae21cb56d0e9c865d14">More...</a><br /></td></tr>
<tr class="separator:a80edabe2bb587ae21cb56d0e9c865d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76168ee145da409e35072665bc589a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af76168ee145da409e35072665bc589a2">ClearClientThread</a> (int klientGniazdo)</td></tr>
<tr class="memdesc:af76168ee145da409e35072665bc589a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sprząta po wątku klienta i zamyka go.  <a href="#af76168ee145da409e35072665bc589a2">More...</a><br /></td></tr>
<tr class="separator:af76168ee145da409e35072665bc589a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36168bfc70b19df922d83bec55788f96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a36168bfc70b19df922d83bec55788f96">GetRandomNumber</a> ()</td></tr>
<tr class="memdesc:a36168bfc70b19df922d83bec55788f96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Losuje losową liczbe.  <a href="#a36168bfc70b19df922d83bec55788f96">More...</a><br /></td></tr>
<tr class="separator:a36168bfc70b19df922d83bec55788f96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8202697b2a2916f9dda68c2f85c26181"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8202697b2a2916f9dda68c2f85c26181">ClearFolder</a> (char *folderName)</td></tr>
<tr class="memdesc:a8202697b2a2916f9dda68c2f85c26181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Czyści i usuwa folder w którym tymczasowo były przechowowane pliki.  <a href="#a8202697b2a2916f9dda68c2f85c26181">More...</a><br /></td></tr>
<tr class="separator:a8202697b2a2916f9dda68c2f85c26181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbbbc976ff1e4d70d3e70e67d5131ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6bbbbc976ff1e4d70d3e70e67d5131ca">LoginUser</a> (int clientSocket, cJSON *json)</td></tr>
<tr class="memdesc:a6bbbbc976ff1e4d70d3e70e67d5131ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loguje użytkownika do serwera.  <a href="#a6bbbbc976ff1e4d70d3e70e67d5131ca">More...</a><br /></td></tr>
<tr class="separator:a6bbbbc976ff1e4d70d3e70e67d5131ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56dfb2cf05070b4c7cf806be30c8d460"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a56dfb2cf05070b4c7cf806be30c8d460">SaveFileOnServer</a> (int klientGniazdo, const cJSON *json)</td></tr>
<tr class="memdesc:a56dfb2cf05070b4c7cf806be30c8d460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zapisuje plik wysyłany przez użytkownika na serwerze.  <a href="#a56dfb2cf05070b4c7cf806be30c8d460">More...</a><br /></td></tr>
<tr class="separator:a56dfb2cf05070b4c7cf806be30c8d460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79bcf1d19ac6f37352d381a2a0dff6cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a79bcf1d19ac6f37352d381a2a0dff6cd">SendFileFromServer</a> (int klientGniazdo, const cJSON *json)</td></tr>
<tr class="memdesc:a79bcf1d19ac6f37352d381a2a0dff6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wysyła plik odbiorcy zapisany na serwerze.  <a href="#a79bcf1d19ac6f37352d381a2a0dff6cd">More...</a><br /></td></tr>
<tr class="separator:a79bcf1d19ac6f37352d381a2a0dff6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656cb2fb4eb182559de11840c0464089"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a656cb2fb4eb182559de11840c0464089">print_linked_list</a> ()</td></tr>
<tr class="memdesc:a656cb2fb4eb182559de11840c0464089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drukuje zawrtość listy użtkowników Funkcja przechodzi przez liste z użytkownikami i drukuje jej zawartość na konsole.  <a href="#a656cb2fb4eb182559de11840c0464089">More...</a><br /></td></tr>
<tr class="separator:a656cb2fb4eb182559de11840c0464089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5640abb6a68676cbf584c8224b1bd916"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a5640abb6a68676cbf584c8224b1bd916">insert_at_last</a> (struct <a class="el" href="struct_user_struct.html">UserStruct</a> newUser)</td></tr>
<tr class="memdesc:a5640abb6a68676cbf584c8224b1bd916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dodaje użytkownika na koniec listy.  <a href="#a5640abb6a68676cbf584c8224b1bd916">More...</a><br /></td></tr>
<tr class="separator:a5640abb6a68676cbf584c8224b1bd916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c27a65d2c065339e23585981b06c070"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6c27a65d2c065339e23585981b06c070">delete_item</a> (int socket)</td></tr>
<tr class="memdesc:a6c27a65d2c065339e23585981b06c070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Usuwa użytkownika.  <a href="#a6c27a65d2c065339e23585981b06c070">More...</a><br /></td></tr>
<tr class="separator:a6c27a65d2c065339e23585981b06c070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93cba5591b608eeb9d4bc729b0510ba9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a93cba5591b608eeb9d4bc729b0510ba9">search_item_by_mod</a> (char modulus[])</td></tr>
<tr class="memdesc:a93cba5591b608eeb9d4bc729b0510ba9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wyszukuje użytkownika po modulo klucza publicznego.  <a href="#a93cba5591b608eeb9d4bc729b0510ba9">More...</a><br /></td></tr>
<tr class="separator:a93cba5591b608eeb9d4bc729b0510ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa922b93b1055974a3015e7249169f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a2fa922b93b1055974a3015e7249169f3">search_item_by_socket</a> (int socket)</td></tr>
<tr class="separator:a2fa922b93b1055974a3015e7249169f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Głowna funkcja serwera zajmująca sie logowaniem użytkowników i przedzielaniu ich do nowo utworzonych wątków.  <a href="#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4bc3a90bae6b2a4949d3160c629879db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a4bc3a90bae6b2a4949d3160c629879db">head</a> =NULL</td></tr>
<tr class="memdesc:a4bc3a90bae6b2a4949d3160c629879db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adres na początek listy.  <a href="#a4bc3a90bae6b2a4949d3160c629879db">More...</a><br /></td></tr>
<tr class="separator:a4bc3a90bae6b2a4949d3160c629879db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceefb68f111d8d85c488e58936c24ef7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> <a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aceefb68f111d8d85c488e58936c24ef7">last</a> =NULL</td></tr>
<tr class="memdesc:aceefb68f111d8d85c488e58936c24ef7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adres na koniec listy.  <a href="#aceefb68f111d8d85c488e58936c24ef7">More...</a><br /></td></tr>
<tr class="separator:aceefb68f111d8d85c488e58936c24ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb297009d9b0e8f9f652c1965227bb9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#abeb297009d9b0e8f9f652c1965227bb9">clientsCounter</a> = 0</td></tr>
<tr class="memdesc:abeb297009d9b0e8f9f652c1965227bb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Licznik przechowujący informacje o ilości osób na serwerze.  <a href="#abeb297009d9b0e8f9f652c1965227bb9">More...</a><br /></td></tr>
<tr class="separator:abeb297009d9b0e8f9f652c1965227bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ada52ed7417b61dbceb294f3a70b64a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada52ed7417b61dbceb294f3a70b64a60">&#9670;&nbsp;</a></span>BUFSENDFILESTRUCT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFSENDFILESTRUCT&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maksymalny rozmiar bufora dla struktur z informacja o pliku. </p>

</div>
</div>
<a id="a32152c6b9522da6329f282c4890fd342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32152c6b9522da6329f282c4890fd342">&#9670;&nbsp;</a></span>MAXBUFFOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXBUFFOR&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maksymalny rozmiar bufora. </p>

</div>
</div>
<a id="ace5c08f66edfc6ae44edaeef6b6101b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5c08f66edfc6ae44edaeef6b6101b6">&#9670;&nbsp;</a></span>MAXCLIENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXCLIENTS&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maksymalna ilość osób na serwerze. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ab5930070ed4d6c00323d40cabc637d4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5930070ed4d6c00323d40cabc637d4b">&#9670;&nbsp;</a></span>node</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlinked__list.html">linked_list</a> <a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alias na strukture listy. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af76168ee145da409e35072665bc589a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af76168ee145da409e35072665bc589a2">&#9670;&nbsp;</a></span>ClearClientThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClearClientThread </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>klientGniazdo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sprząta po wątku klienta i zamyka go. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">klientGniazdo</td><td>gniazdo klienta konczącego działanie</td></tr>
  </table>
  </dd>
</dl>
<p>Funkcja zamyka gniazdo klienta usuwa klienta z listy aktualnie dostępnych, zmniejsza licznik połączonych klientów, rozsyła do aktywnych klientów zaktualizowane liste użytkowników i kończy wątek klienta. </p>

</div>
</div>
<a id="a8202697b2a2916f9dda68c2f85c26181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8202697b2a2916f9dda68c2f85c26181">&#9670;&nbsp;</a></span>ClearFolder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClearFolder </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>folderName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Czyści i usuwa folder w którym tymczasowo były przechowowane pliki. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">folderName</td><td>Nazwa folderu</td></tr>
  </table>
  </dd>
</dl>
<p>Funkcja przechodzi do folderu podanego jako argument a następnie czyści go z plików "File" , "EncryptedKey", "EncryptedIV", "FileName". Które były tymczasowo przechowywane na serwerze w ramach przesyłania pliku między klientami następnie usuwa podany folder. </p>

</div>
</div>
<a id="a954f14c716b852a2cfe58997d8f50eee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954f14c716b852a2cfe58997d8f50eee">&#9670;&nbsp;</a></span>ClientThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ClientThread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>watekArg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funkcja która jest wywoływana w wątku dla każdego nowego klienta. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">watekArg</td><td>Argumenty dla wątku</td></tr>
  </table>
  </dd>
</dl>
<p>Funkcja która opisuje działanie wątku dla każdego nowego klienta który pojawi sie na serwerze. Obsługuje trzy funkcje jakimi są zapis pliku na serwerze, odebranie pliku z serwera oraz odrzucenie pliku do pobrania z serwera. </p>

</div>
</div>
<a id="a9b5900aafd0149777f24db43937c3465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b5900aafd0149777f24db43937c3465">&#9670;&nbsp;</a></span>CreateJSONFileInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * CreateJSONFileInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>returnCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>encryptedName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>encryptedKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>encryptedIV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funkcja tworzy informacje o pliku w formacie JSON. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">returnCode</td><td>Kod zwrotny dla klienta jaki chcemy załączyć </td></tr>
    <tr><td class="paramname">encryptedName</td><td>Zaszyfrowana przy pomocy RSA nazwa pliku </td></tr>
    <tr><td class="paramname">encryptedKey</td><td>Zaszyfrowany przy pomocy RSA klucz AES </td></tr>
    <tr><td class="paramname">encryptedIV</td><td>Zaszyfrowany przy pomocy RSA wektor inicjujący AES. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca tablice char która zawiera informacje o pliku w formacie JSON</dd></dl>
<p>Funkcja tworzy objekt w formacjie JSON przy pomocy podanych argumentów </p>

</div>
</div>
<a id="af94b217b978a6a5fb67458c194f52a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94b217b978a6a5fb67458c194f52a8a">&#9670;&nbsp;</a></span>CreateJSONUserList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * CreateJSONUserList </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>returnCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funkcja tworzy liste użytkowników w formacie JSON. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">returnCode</td><td>Kod zwrotny dla klienta jaki chcemy załączyć </td></tr>
    <tr><td class="paramname">message</td><td>Wiadomość zwrotna dla klienta </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca tablice char która zawiera liste użytkowników w formacie JSON</dd></dl>
<p>Funkcja przechodzi po liscie z użytkownikami i dodaje ich pola takie jak nazwa użytkownika, klucz publiczny do obiektu JSON następnie serialzuje go tworząc z niego tablice charów. </p>

</div>
</div>
<a id="a6c27a65d2c065339e23585981b06c070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c27a65d2c065339e23585981b06c070">&#9670;&nbsp;</a></span>delete_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_item </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Usuwa użytkownika. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Gniazdo użytkownika usuwanego</td></tr>
  </table>
  </dd>
</dl>
<p>Funkcja przechodzi przez liste z użytkownikami i szuka użytkownika o zadanym gniedzie, nastepnie po znalezeniu usuwa go z listy </p>

</div>
</div>
<a id="a36168bfc70b19df922d83bec55788f96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36168bfc70b19df922d83bec55788f96">&#9670;&nbsp;</a></span>GetRandomNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int GetRandomNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Losuje losową liczbe. </p>
<dl class="section return"><dt>Returns</dt><dd>Zwraca wylosowana liczbę</dd></dl>
<p>Funkcja losuje liczbe z zakresu o do 10000 która następnie służy do wygenerowania wartości dla folderu klienta w którym tymczasowo będą przechowywane przesyłane pliki. </p>

</div>
</div>
<a id="a5640abb6a68676cbf584c8224b1bd916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5640abb6a68676cbf584c8224b1bd916">&#9670;&nbsp;</a></span>insert_at_last()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert_at_last </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_user_struct.html">UserStruct</a>&#160;</td>
          <td class="paramname"><em>newUser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dodaje użytkownika na koniec listy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newUser</td><td>Struktura zawierająca dane nowego użytkownika </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac01c9e6eba7d0d22bca950b87215c950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac01c9e6eba7d0d22bca950b87215c950">&#9670;&nbsp;</a></span>LoadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LoadFile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outarry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wczytuje plik do pamięci serwera w postaci tablicy char. Słuzy do wczytywania kluczy AES oraz nazwy pliku zaszyfrowanych przy pomocy RSA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Nazwa pliku który chcemy wczytać </td></tr>
    <tr><td class="paramname">outarry</td><td>Tablica do której chcemy wpisać plik </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca 0 jeżeli się udało 1 jeżeli wystąpił błąd </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Pliki o maksymalnym rozmiarze 344 B</dd></dl>
<p>Funkcja otwiera do czytania plik podany jak argument filename, następnie czyta z niego zapisując to tymczasowego bufora, nastepnie kopiuje buffor do zmiennej outarray </p>

</div>
</div>
<a id="a6bbbbc976ff1e4d70d3e70e67d5131ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bbbbc976ff1e4d70d3e70e67d5131ca">&#9670;&nbsp;</a></span>LoginUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LoginUser </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>clientSocket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cJSON *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loguje użytkownika do serwera. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clientSocket</td><td>Gniazdo logowanego użytkownika. </td></tr>
    <tr><td class="paramname">json</td><td>Obiekt w formacie JSON przechowujący dane użytkownika którego chcemy zalogować. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca 0 jeżeli się udało 1 jeżeli wystąpił błąd.</dd></dl>
<p>Funkcja kopiuje dane użytkownika do struktury <a class="el" href="struct_user_struct.html" title="Struktura przechowująca dane zalogowanego użytkownika.">UserStruct</a> następnie wysyła wiadomość o zalogowaniu i czeka na potwierdzenie, jeżeli je otrzyma dodaje użytkownika do listy aktywnych użytkowników i wywoluje funkcje <a class="el" href="main_8c.html#a80edabe2bb587ae21cb56d0e9c865d14" title="Służy do wysłania aktywnym klientom listy aktywnych użytkowników.">SendRefreshUserList()</a>, która wysyła odswieżenie listy użytkowników wszystkim aktywnym klientom. </p>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Głowna funkcja serwera zajmująca sie logowaniem użytkowników i przedzielaniu ich do nowo utworzonych wątków. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Ilość argumentów podanych w wywołaniu </td></tr>
    <tr><td class="paramname">argv</td><td>Tablica z parametrami wywołania </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a656cb2fb4eb182559de11840c0464089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656cb2fb4eb182559de11840c0464089">&#9670;&nbsp;</a></span>print_linked_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_linked_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drukuje zawrtość listy użtkowników Funkcja przechodzi przez liste z użytkownikami i drukuje jej zawartość na konsole. </p>

</div>
</div>
<a id="ab6666d9c44e6471297d5f54c89ec434a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6666d9c44e6471297d5f54c89ec434a">&#9670;&nbsp;</a></span>SaveFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SaveFile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funkcja do zapisu pliku na dysk serwera. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Nazwa pliku pod jakim chcemy zapisać plik </td></tr>
    <tr><td class="paramname">content</td><td>Zawartośc zapisywanego pliku </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca 0 jeżeli się udało 1 jeżeli wystąpił błąd</dd></dl>
<p>Funkcja tworzy i otwiera nowy plik o nazwie podanej jako pareamter, nastepnie zapisuje do tego pliku zawartość jaka została podana jako argument do funkcji. </p>

</div>
</div>
<a id="a56dfb2cf05070b4c7cf806be30c8d460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56dfb2cf05070b4c7cf806be30c8d460">&#9670;&nbsp;</a></span>SaveFileOnServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SaveFileOnServer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>klientGniazdo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cJSON *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zapisuje plik wysyłany przez użytkownika na serwerze. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">klientGniazdo</td><td>Gniazdo klienta. </td></tr>
    <tr><td class="paramname">json</td><td>Obiekt w formacie JSON przechowujący zaszyfrowana nazwe pliku, zaszyfrowany klucz AES, wektor inicjujący AES oraz odbiorce. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca 0 jeżeli się udało 1 jeżeli wystąpił błąd.</dd></dl>
<p>Funkcja wyszukuje odbiorce, oraz nadawce w liscie klientów i blokuje im możliwość odbierania innych powiadomień niż tych dotyczących przesyłania pliku Następnie losowany jest numer folderu oraz jest on tworzony Zapisywane są do folderu tymczasowego zaszyfrowane pliki zawierajace klucz AES oraz nazwe pliku Wysyłane jest powiadomienie o gotowści na przyjęcie własciwego pliku Serwer tworzy nowy plik i zapisuje do niego zaszyfrowaną zawartośc wysłaną przez klienta Po odebraniu pliku wysyła powiadoeminie odbiorcy o dostępności pliku do pobrania </p>

</div>
</div>
<a id="a93cba5591b608eeb9d4bc729b0510ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93cba5591b608eeb9d4bc729b0510ba9">&#9670;&nbsp;</a></span>search_item_by_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> * search_item_by_mod </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>modulus</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wyszukuje użytkownika po modulo klucza publicznego. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">modulus</td><td>Mod klucza głownego użytkownika </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Węzeł zawierający strukture szukanego użytkownika</dd></dl>
<p>Funkcja przechodzi przez liste z użytkownikami i szuka użytkownika o zadanym modulo klucza publicznego. </p>

</div>
</div>
<a id="a2fa922b93b1055974a3015e7249169f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fa922b93b1055974a3015e7249169f3">&#9670;&nbsp;</a></span>search_item_by_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> * search_item_by_socket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wyszukuje użytkownika po gniezdzie </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>GNiazdo użytkownika </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Węzeł zawierający strukture szukanego użytkwonika</dd></dl>
<p>Funkcja przechodzi przez liste z użytkownikami i szuka użytkownika o zadanym gniezdzie. </p>

</div>
</div>
<a id="a79bcf1d19ac6f37352d381a2a0dff6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79bcf1d19ac6f37352d381a2a0dff6cd">&#9670;&nbsp;</a></span>SendFileFromServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SendFileFromServer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>klientGniazdo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cJSON *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wysyła plik odbiorcy zapisany na serwerze. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">klientGniazdo</td><td>Gniazdo klienta. </td></tr>
    <tr><td class="paramname">json</td><td>Obiekt w formacie JSON przechowujący nazwe folderu z którego odbiorac ma otrzymać plik. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Zwraca 0 jeżeli się udało 1 jeżeli wystąpił błąd.</dd></dl>
<p>Funkcja przechodzi do podanego folderu i wczytuje do pamieci zaszyfrowany klucz AES, zaszyfrowany wektor inicjujący oraz zaszyfrowana nazwe pliku Następnie wszystkie te informacje wklada do obietu typu JSON i wysyła do klienta czekając na potwierdzenie Jeżeli serwer otrzymał potwierdzenie rozpoczyna czytanie pliku i przesylanie do klienta Po poprawnym przesłaniu pliku czyści folder z jego zawartości </p>

</div>
</div>
<a id="a80edabe2bb587ae21cb56d0e9c865d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80edabe2bb587ae21cb56d0e9c865d14">&#9670;&nbsp;</a></span>SendRefreshUserList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendRefreshUserList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Służy do wysłania aktywnym klientom listy aktywnych użytkowników. </p>
<p>Funkcja przechodzi po liscie aktywnych klientów sprawdzajac czy nie są oni zablokowani przez operacje przesyłania plików, jezeli nie to tworzy obiekt JSON z listą użytkowników i wysyła ją do aktualnie rozpatrywanego klienta. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abeb297009d9b0e8f9f652c1965227bb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb297009d9b0e8f9f652c1965227bb9">&#9670;&nbsp;</a></span>clientsCounter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int clientsCounter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Licznik przechowujący informacje o ilości osób na serwerze. </p>

</div>
</div>
<a id="a4bc3a90bae6b2a4949d3160c629879db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc3a90bae6b2a4949d3160c629879db">&#9670;&nbsp;</a></span>head</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a>* head =NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adres na początek listy. </p>

</div>
</div>
<a id="aceefb68f111d8d85c488e58936c24ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceefb68f111d8d85c488e58936c24ef7">&#9670;&nbsp;</a></span>last</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a> <a class="el" href="main_8c.html#ab5930070ed4d6c00323d40cabc637d4b">node</a>* last =NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adres na koniec listy. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
